(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{385:function(e,a,t){"use strict";t.r(a);var o=t(42),s=Object(o.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"api-standards"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-standards"}},[e._v("#")]),e._v(" API Standards")]),e._v(" "),t("p",[e._v("The following web-based application programming interface (API) standards guidance will help your organisation deliver the best possible services to users.")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#follow-the-technology-code-of-practice"}},[e._v("Follow the Technology Code of Practice")])]),t("li",[t("a",{attrs:{href:"#use-restful"}},[e._v("Use RESTful")])]),t("li",[t("a",{attrs:{href:"#use-https"}},[e._v("Use HTTPS")])]),t("li",[t("a",{attrs:{href:"#consider-linking-data-hypermedia"}},[e._v("Consider linking data (hypermedia)")])]),t("li",[t("a",{attrs:{href:"#use-json"}},[e._v("Use JSON")])]),t("li",[t("a",{attrs:{href:"#to-represent-time-and-date"}},[e._v("To represent time and date")])]),t("li",[t("a",{attrs:{href:"#to-represent-a-physical-location"}},[e._v("To represent a physical location")])]),t("li",[t("a",{attrs:{href:"#use-unicode-for-encoding"}},[e._v("Use Unicode for encoding")])]),t("li",[t("a",{attrs:{href:"#how-to-respond-to-data-requests"}},[e._v("How to respond to data requests")])]),t("li",[t("a",{attrs:{href:"#design-data-fields-with-user-needs-in-mind"}},[e._v("Design data fields with user needs in mind")])]),t("li",[t("a",{attrs:{href:"#let-users-download-whole-datasets-in-bulk"}},[e._v("Let users download whole datasets in bulk")])]),t("li",[t("a",{attrs:{href:"#encourage-users-to-keep-local-dataset-copies-up-to-date"}},[e._v("Encourage users to keep local dataset copies up to date")])]),t("li",[t("a",{attrs:{href:"#when-publishing-bulk-data"}},[e._v("When publishing bulk data")])]),t("li",[t("a",{attrs:{href:"#keep-a-log-of-requests-for-personal-data"}},[e._v("Keep a log of requests for personal data")])]),t("li",[t("a",{attrs:{href:"#when-to-use-open-access"}},[e._v("When to use open access")])]),t("li",[t("a",{attrs:{href:"#when-to-authenticate-your-api"}},[e._v("When to authenticate your API")])]),t("li",[t("a",{attrs:{href:"#to-provide-application-level-authorisation"}},[e._v("To provide application-level authorisation")])]),t("li",[t("a",{attrs:{href:"#to-provide-user-level-authorisation"}},[e._v("To provide user-level authorisation")])]),t("li",[t("a",{attrs:{href:"#for-privacy-and-allow-lists"}},[e._v("For privacy and allow lists")])]),t("li",[t("a",{attrs:{href:"#follow-good-practice-for-tokens-and-permissions"}},[e._v("Follow good practice for tokens and permissions")])]),t("li",[t("a",{attrs:{href:"#monitor-apis-for-unusual-activity"}},[e._v("Monitor APIs for unusual activity")])]),t("li",[t("a",{attrs:{href:"#when-naming-and-hosting-your-api"}},[e._v("When naming and hosting your API")])]),t("li",[t("a",{attrs:{href:"#avoid-the-use-of-namespaces"}},[e._v("Avoid the use of namespaces")])]),t("li",[t("a",{attrs:{href:"#when-you-need-to-provide-multiple-apis-from-the-same-domain"}},[e._v("When you need to provide multiple APIs from the same domain")])]),t("li",[t("a",{attrs:{href:"#when-using-sub-resources"}},[e._v("When using sub-resources")])]),t("li",[t("a",{attrs:{href:"#when-using-query-arguments"}},[e._v("When using query arguments")])]),t("li",[t("a",{attrs:{href:"#when-iterating-your-api"}},[e._v("When iterating your API")])]),t("li",[t("a",{attrs:{href:"#when-making-a-backwards-incompatible-change"}},[e._v("When making a backwards incompatible change")])]),t("li",[t("a",{attrs:{href:"#set-clear-deprecation-policies"}},[e._v("Set clear deprecation policies")])]),t("li",[t("a",{attrs:{href:"#provide-users-with-a-test-service"}},[e._v("Provide users with a test service")])]),t("li",[t("a",{attrs:{href:"#test-your-api-s-compliance"}},[e._v("Test your API's compliance")])]),t("li",[t("a",{attrs:{href:"#test-your-api-s-performance-and-scalability"}},[e._v("Test your API's performance and scalability")])]),t("li",[t("a",{attrs:{href:"#document-your-api"}},[e._v("Document your API")])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"follow-the-technology-code-of-practice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#follow-the-technology-code-of-practice"}},[e._v("#")]),e._v(" Follow the Technology Code of Practice")]),e._v(" "),t("p",[e._v("Make sure your APIs satisfy the requirements of the "),t("a",{attrs:{href:"/guides/technology-practice"}},[e._v("Technology Code of Practice")]),e._v(" by making sure they:")]),e._v(" "),t("ul",[t("li",[e._v("follow the Open Standards Principles of open access, consensus-based open process and royalty-free licensing")]),e._v(" "),t("li",[e._v("scale so they can maintain service level objectives and agreements when demand increases")]),e._v(" "),t("li",[e._v("are stable so they can maintain service level objectives and agreements when changed or dealing with unexpected events")]),e._v(" "),t("li",[e._v("adhere to UK government security policies and guidelines and other TCOP security guidance")]),e._v(" "),t("li",[e._v("are reusable where possible so the government does not duplicate work")])]),e._v(" "),t("h2",{attrs:{id:"use-restful"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-restful"}},[e._v("#")]),e._v(" Use RESTful")]),e._v(" "),t("p",[e._v("Follow the industry standard and where appropriate build APIs that are RESTful, which use HTTP verb requests to manipulate data.")]),e._v(" "),t("p",[e._v("When handling requests, you should use HTTP verbs for their specified purpose.")]),e._v(" "),t("p",[e._v("One of the advantages of REST is that it gives you a framework for communicating error states.")]),e._v(" "),t("p",[e._v("In some cases, it may not be applicable to build a REST API, for example, when you are building an API to stream data.")]),e._v(" "),t("h2",{attrs:{id:"use-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-https"}},[e._v("#")]),e._v(" Use HTTPS")]),e._v(" "),t("p",[e._v("You should use HTTPS when creating APIs.")]),e._v(" "),t("p",[e._v("Adding HTTPS will secure connections to your API, preserve user privacy, ensure data integrity, and authenticate the server providing the API. The Service Manual provides more guidance on HTTPS.")]),e._v(" "),t("p",[e._v("Secure APIs using Transport Layer Security (TLS) v1.2. Do not use Secure Sockets Layer (SSL) or TLS v1.0.")]),e._v(" "),t("p",[e._v("There are multiple free and low-cost vendors that offer TLS certificates.")]),e._v(" "),t("p",[e._v("Make sure potential API users can establish trust in your certificates. Make sure you have a robust process for timely certificate renewal and revocation.")]),e._v(" "),t("h2",{attrs:{id:"consider-linking-data-hypermedia"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#consider-linking-data-hypermedia"}},[e._v("#")]),e._v(" Consider linking data (hypermedia)")]),e._v(" "),t("p",[e._v("Your API may warrant linking your data together. You can make your API more programmatically accessible by returning URIs, and by using existing standards and specifications.")]),e._v(" "),t("p",[e._v("Use Uniform Resource Identifiers (URIs) to identify certain data:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{  \n    "name": "Bob Person",  \n    "company": "https://your.api/company/bobscompany";  \n}\n')])])]),t("p",[e._v("When your API returns data in response to an HTTP call, you should use URIs in the payload to identify certain data. Where appropriate, you should use specifications that use hypermedia, including CURIES, JSON-LD or HAL. This makes it easier to find those resources.")]),e._v(" "),t("h2",{attrs:{id:"use-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-json"}},[e._v("#")]),e._v(" Use JSON")]),e._v(" "),t("p",[e._v("Your first choice for all web APIs should be JSON where possible.")]),e._v(" "),t("p",[e._v("Only use another representation to build something in exceptional cases, like when you:")]),e._v(" "),t("ul",[t("li",[e._v("need to connect to a legacy system, for example, one that only uses XML")]),e._v(" "),t("li",[e._v("will receive clear advantages from complying with a broadly adopted standard (for example, SAML)")])]),e._v(" "),t("p",[e._v("We recommend you should:")]),e._v(" "),t("ul",[t("li",[e._v("create responses as a JSON object and not an array (JSON objects can contain JSON arrays) - arrays can limit the ability to include metadata about results and limit the API's ability to add additional top-level keys in the future")]),e._v(" "),t("li",[e._v("document your JSON object to ensure it is well described, and so that it is not treated as a sequential array")]),e._v(" "),t("li",[e._v("avoid unpredictable object keys such as those derived from data as this adds friction for clients")]),e._v(" "),t("li",[e._v("use consistent grammar case for object keys - choose under_score or CamelCase and be consistent")])]),e._v(" "),t("h2",{attrs:{id:"to-represent-time-and-date"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-represent-time-and-date"}},[e._v("#")]),e._v(" To represent time and date")]),e._v(" "),t("p",[e._v("The government mandates using the ISO 8601 standard to represent date and time in your payload response. This helps people read the time correctly.")]),e._v(" "),t("p",[e._v("Use a consistent date format. For dates, this looks like 2017-08-09. For dates and times, use the form 2017-08-09T13:58:07Z.")]),e._v(" "),t("h2",{attrs:{id:"to-represent-a-physical-location"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-represent-a-physical-location"}},[e._v("#")]),e._v(" To represent a physical location")]),e._v(" "),t("p",[e._v("The European Union mandates using the ETRS89 standard for the geographical scope of Europe. You can also use WGS 84 or other CRS coordinate systems for European location data in addition to this.")]),e._v(" "),t("p",[e._v("Use the World Geodetic System 1984 (WGS 84) standard for the rest of the world. You can also use other CRS coordinate systems for the rest of the world in addition to this.")]),e._v(" "),t("p",[e._v("You should use GeoJSON for the exchange of location information.")]),e._v(" "),t("h2",{attrs:{id:"use-unicode-for-encoding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-unicode-for-encoding"}},[e._v("#")]),e._v(" Use Unicode for encoding")]),e._v(" "),t("p",[e._v("The Unicode Transformation Format (UTF-8) standard is mandatory for use in government when encoding text or other textual representations of data.")]),e._v(" "),t("h2",{attrs:{id:"how-to-respond-to-data-requests"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-respond-to-data-requests"}},[e._v("#")]),e._v(" How to respond to data requests")]),e._v(" "),t("p",[e._v("Configure APIs to respond to 'requests' for data rather than 'sending' or 'pushing' data. This makes sure the API user only receives the information they require.")]),e._v(" "),t("p",[e._v('When responding, your API must answer the request fully and specifically. For example, an API should respond to the request "is this user married?" with a boolean. The answer should not return any more detail than is required and should rely on the client application to correctly interpret it.')]),e._v(" "),t("p",[e._v("For example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{ "married":"false" }\n')])])]),t("p",[e._v("Rather than:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('person": {  \n    "name": "Alice Betterland",\n    "dob": "1999-01-01",\n    "married": false,\n    "validFrom": "2011-04-03",\n    "validTo": ""\n}  \n')])])]),t("h2",{attrs:{id:"design-data-fields-with-user-needs-in-mind"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#design-data-fields-with-user-needs-in-mind"}},[e._v("#")]),e._v(" Design data fields with user needs in mind")]),e._v(" "),t("p",[e._v("When designing your data fields, you should consider how the fields will meet user needs. Having a technical writer in your team can help you do this. You can also regularly test your documentation.")]),e._v(" "),t("p",[e._v("For example, if you need to collect personal information as part of your dataset, before deciding on your payload response, you may need to consider whether:")]),e._v(" "),t("ul",[t("li",[e._v("the design can cope with names from cultures which don't have first and last names")]),e._v(" "),t("li",[e._v("the abbreviation DOB makes sense or whether it's better to spell out the field to date of birth")]),e._v(" "),t("li",[e._v("DOB makes sense when combined with DOD (date of death) or DOJ (date of joining)")])]),e._v(" "),t("p",[e._v('You should also make sure you provide all the relevant options. For example, the "marriage” field is likely to have more than 2 states you wish to record: married, unmarried, divorced, widowed, estranged, annulled and so on.')]),e._v(" "),t("p",[e._v("Depending on what you decide, you may choose the following payload as a response:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{  \n    person": {  \n        "name": "Alice Wonderland",\n        "dob": "1999-01-01",\n        "married": true,\n        "validFrom":"2010-03-12",\n        "validTo":"2011-04-03"\n    },\n    person": {  \n        "name": "Alice Betterland",\n        "dob": "1999-01-01",\n        "married": false,\n        "validFrom":"2011-04-03",\n        "validTo":""\n    }\n}  \n')])])]),t("h2",{attrs:{id:"let-users-download-whole-datasets-in-bulk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#let-users-download-whole-datasets-in-bulk"}},[e._v("#")]),e._v(" Let users download whole datasets in bulk")]),e._v(" "),t("p",[e._v("When providing an Open Data API, you should let users download whole datasets unless they contain restricted information. This gives users:")]),e._v(" "),t("ul",[t("li",[e._v("the ability to analyse the dataset locally")]),e._v(" "),t("li",[e._v("support when performing a task requiring access to the whole dataset (for example, plotting a graph on school catchment areas in England)")])]),e._v(" "),t("p",[e._v("Users should be able to index their local copy of data using their choice of database technology and then perform a query to meet their needs. This means that future API downtime won't affect them because they already have all the data they need.")]),e._v(" "),t("p",[e._v("Using a record-by-record data API query to perform the same action would be suboptimal, both for the user and for the API. This is because:")]),e._v(" "),t("ul",[t("li",[e._v("rate limits would slow down access, or may even stop the whole dataset from downloading entirely")]),e._v(" "),t("li",[e._v("if the dataset is being updated at the same time with the record-by-record download, users may get inconsistent records")])]),e._v(" "),t("p",[e._v("If you allow a user to download an entire dataset, you should consider providing a way for them to keep it up to date. For example you could live stream your data or notify them that new data is available so that API consumers know to download you API data periodically.")]),e._v(" "),t("h2",{attrs:{id:"encourage-users-to-keep-local-dataset-copies-up-to-date"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#encourage-users-to-keep-local-dataset-copies-up-to-date"}},[e._v("#")]),e._v(" Encourage users to keep local dataset copies up to date")]),e._v(" "),t("p",[e._v("Don't encourage users to keep large datasets up to date by re-downloading them because this approach is wasteful and impractical. Instead, let users download incremental lists of changes to a dataset. This allows them to keep their own local copy up to date and saves them having to re-download the whole dataset repeatedly.")]),e._v(" "),t("p",[e._v("There isn't a recommended standard for this pattern, so users can try different approaches such as:")]),e._v(" "),t("ul",[t("li",[e._v("encoding data in Atom/RSS feeds")]),e._v(" "),t("li",[e._v("using emergent patterns, such as event streams used by products such as Apache Kafka")]),e._v(" "),t("li",[e._v("making use of open data registers")])]),e._v(" "),t("h2",{attrs:{id:"when-publishing-bulk-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-publishing-bulk-data"}},[e._v("#")]),e._v(" When publishing bulk data")]),e._v(" "),t("p",[e._v("Make data available in CSV formats as well as JSON when you want to publish bulk data. This makes sure users can use a wide range of tools, including off-the-shelf software, to import and analyse this data.")]),e._v(" "),t("p",[e._v("Publish bulk data on data.gov.uk and make sure there is a prominent link to it.")]),e._v(" "),t("h2",{attrs:{id:"keep-a-log-of-requests-for-personal-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keep-a-log-of-requests-for-personal-data"}},[e._v("#")]),e._v(" Keep a log of requests for personal data")]),e._v(" "),t("p",[e._v("If your API serves personal or sensitive data, you must log when the data is provided and to whom. This will help you meet your requirements under General Data Protection Regulation (GDPR), respond to data subject access requests, and detect fraud or misuse.")]),e._v(" "),t("h2",{attrs:{id:"when-to-use-open-access"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-to-use-open-access"}},[e._v("#")]),e._v(" When to use open access")]),e._v(" "),t("p",[e._v("Use open access (no control) if you want to give unfettered access to your API and you do not need to identify your users, for example when providing open data. However, do bear in mind the risk of denial-of-service attacks.")]),e._v(" "),t("p",[e._v("Open access does not mean you are unable to throttle your API.")]),e._v(" "),t("p",[e._v("Consider the option of publishing open data on data.gov.uk instead of via an API. When using open data do not use authentication so you can maximise the use of your API.")]),e._v(" "),t("h2",{attrs:{id:"when-to-authenticate-your-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-to-authenticate-your-api"}},[e._v("#")]),e._v(" When to authenticate your API")]),e._v(" "),t("p",[e._v("Authentication is required when you want to identify clients for the purposes of:")]),e._v(" "),t("ul",[t("li",[e._v("rate limiting/throttling")]),e._v(" "),t("li",[e._v("auditing")]),e._v(" "),t("li",[e._v("billing")]),e._v(" "),t("li",[e._v("authorisation")])]),e._v(" "),t("p",[e._v("Your purpose will dictate the security requirements for your authentication solution.")]),e._v(" "),t("p",[e._v("For example, if you need to identify users purely for rate limiting, you may not need to refresh user tokens very often as a token in the wrong hands will be unlikely to threaten your service.")]),e._v(" "),t("p",[e._v("Make sure you consider your API may require more than just authenticating an organisation token, for example, when dealing with sensitive information such as medical data.")]),e._v(" "),t("h2",{attrs:{id:"to-provide-application-level-authorisation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-provide-application-level-authorisation"}},[e._v("#")]),e._v(" To provide application-level authorisation")]),e._v(" "),t("p",[e._v("Use application-level authorisation if you want to control which applications can access your API, but not which specific end users. This is suitable if you want to use rate limiting, auditing, or billing functionality. Application-level authorisation is probably not suitable for APIs holding personal or sensitive data unless you really trust your consumers, for example, another government department.")]),e._v(" "),t("p",[e._v("If your organisation is managing the API, you will need to manage the authorisation server.")]),e._v(" "),t("p",[e._v("We recommend using OAuth 2.0, the open authorisation framework (specifically with the Client Credentials grant type). This service gives each registered application an OAuth2 Bearer Token, which can be used to make API requests on the application's own behalf.")]),e._v(" "),t("h2",{attrs:{id:"to-provide-user-level-authorisation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-provide-user-level-authorisation"}},[e._v("#")]),e._v(" To provide user-level authorisation")]),e._v(" "),t("p",[e._v("Use user-level authorisation if you want to control which end users can access your API. This is suitable for dealing with personal or sensitive data.")]),e._v(" "),t("p",[e._v("For example, OAuth 2.0 is a popular authorisation method in government, specifically with the Authorisation Code grant type. Use OAuth 2.0 Scopes for more granular access control.")]),e._v(" "),t("p",[e._v("OpenID Connect (OIDC), which builds on top of OAuth2, with its use of JSON Web Token (JWT), might be suitable in some cases, for example a federated system.")]),e._v(" "),t("h2",{attrs:{id:"for-privacy-and-allow-lists"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#for-privacy-and-allow-lists"}},[e._v("#")]),e._v(" For privacy and allow lists")]),e._v(" "),t("p",[e._v("Use an allow list if you want your API to be permanently or temporarily private, for example, to run a private beta. You can add to the allow list per application or per user.")]),e._v(" "),t("p",[e._v("You should not add the IP addresses of the APIs you consume to your allow list. This is because APIs may be provided using Content Delivery Networks (CDNs) and scalable load balancers, which rely on flexible, rapid allocation of IP addresses and sharing. Instead of using an allow list, you should use an HTTPS egress proxy.")]),e._v(" "),t("h2",{attrs:{id:"follow-good-practice-for-tokens-and-permissions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#follow-good-practice-for-tokens-and-permissions"}},[e._v("#")]),e._v(" Follow good practice for tokens and permissions")]),e._v(" "),t("p",[e._v("You should:")]),e._v(" "),t("ul",[t("li",[e._v("choose a suitable refresh frequency and expiry period for your user access tokens - failure to refresh access tokens regularly can lead to vulnerabilities")]),e._v(" "),t("li",[e._v("allow your users to revoke authority")]),e._v(" "),t("li",[e._v("invalidate an access token yourselves and force a reissue if there is a reason to suspect a token has been compromised.")]),e._v(" "),t("li",[e._v("use time-based one-time passwords (TOTP) for extra security on APIs with application-level authorisation")]),e._v(" "),t("li",[e._v("use multi-factor authentication (MFA) and identity verification (IV) for extra security on APIs with user-level authorisation")]),e._v(" "),t("li",[e._v("ensure the tokens you provide have the narrowest permissions possible (narrowing the permissions means there's a much lower risk to your API if the tokens are lost by users or compromised)")])]),e._v(" "),t("h2",{attrs:{id:"monitor-apis-for-unusual-activity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitor-apis-for-unusual-activity"}},[e._v("#")]),e._v(" Monitor APIs for unusual activity")]),e._v(" "),t("p",[e._v("Your API security is only as good as your day-to-day security processes.")]),e._v(" "),t("p",[e._v("Monitor APIs for unusual behaviour just like you'd closely monitor any website. Look for changes in IP addresses or users using APIs at unusual times of the day. Read the National Cyber Security Centre (NCSC) guidance to find out how to implement a monitoring strategy and the specifics of how to monitor the security status of networks and systems.")]),e._v(" "),t("h2",{attrs:{id:"when-naming-and-hosting-your-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-naming-and-hosting-your-api"}},[e._v("#")]),e._v(" When naming and hosting your API")]),e._v(" "),t("p",[e._v("Follow our guidance on choosing a domain name.")]),e._v(" "),t("p",[e._v("All API naming in URLs (including the name of your API, namespaces and resources) should:")]),e._v(" "),t("ul",[t("li",[e._v("use nouns rather than verbs")]),e._v(" "),t("li",[e._v("be short, simple and clearly understandable")]),e._v(" "),t("li",[e._v("be human-guessable, avoiding technical or specialist terms where possible")]),e._v(" "),t("li",[e._v("use hyphens rather than underscores as word separators for multiword names")])]),e._v(" "),t("p",[e._v("For example: "),t("code",[e._v("[api-name].kpgov.tech")])]),e._v(" "),t("h2",{attrs:{id:"avoid-the-use-of-namespaces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#avoid-the-use-of-namespaces"}},[e._v("#")]),e._v(" Avoid the use of namespaces")]),e._v(" "),t("p",[e._v("Generally, each of your APIs should have its own domain, just as each service has its own domain. This will also avoid API sprawl and simplify your versioning.")]),e._v(" "),t("h2",{attrs:{id:"when-you-need-to-provide-multiple-apis-from-the-same-domain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-you-need-to-provide-multiple-apis-from-the-same-domain"}},[e._v("#")]),e._v(" When you need to provide multiple APIs from the same domain")]),e._v(" "),t("p",[e._v("If you provide multiple APIs and you have a business case that means you'll deploy common services across them, such as common management, authentication and security approaches, you may need to consider:")]),e._v(" "),t("ul",[t("li",[e._v("providing them all from the same domain")]),e._v(" "),t("li",[e._v("differentiating them through the use of namespaces.")])]),e._v(" "),t("p",[e._v("The namespace should reflect the function of government being offered by this API. Namespaces may be singular or plural, depending on the situation.")]),e._v(" "),t("h2",{attrs:{id:"when-using-sub-resources"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-using-sub-resources"}},[e._v("#")]),e._v(" When using sub-resources")]),e._v(" "),t("p",[e._v("Sub-resources must appear under the resource they relate to, but should go no more than three deep, for example: "),t("code",[e._v("/resource/id/sub-resource/id/sub-sub-resource")]),e._v(".")]),e._v(" "),t("p",[e._v("If you reach a third level of granularity (sub-sub-resource), you should review your resource construction to see if it is actually a combination of multiple first or second level resources.")]),e._v(" "),t("h2",{attrs:{id:"when-using-query-arguments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-using-query-arguments"}},[e._v("#")]),e._v(" When using query arguments")]),e._v(" "),t("p",[e._v("You should use path parameters to identify a specific resource or resources. For example, "),t("code",[e._v("/users/1")]),e._v(".")]),e._v(" "),t("p",[e._v("You should only allow query strings to be used in GET requests for filtering the values returned from an individual resource, for example "),t("code",[e._v("/users?state=active")]),e._v(" or "),t("code",[e._v("/users?page=2")]),e._v(".")]),e._v(" "),t("p",[e._v("You should never use query strings in GET requests for identification purposes, for example, avoid using the query string "),t("code",[e._v("/users?id=1")]),e._v(".")]),e._v(" "),t("p",[e._v("Query strings should not be used for defining the behaviour of your API, for example /users?action=getUser&id=1.")]),e._v(" "),t("h2",{attrs:{id:"when-iterating-your-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-iterating-your-api"}},[e._v("#")]),e._v(" When iterating your API")]),e._v(" "),t("p",[e._v("When iterating your API to add new or improved functionality, you should minimise disruption for your users so that they do not incur unnecessary costs.")]),e._v(" "),t("p",[e._v("To minimise disruption for users, you should:")]),e._v(" "),t("ul",[t("li",[e._v("make backwards compatible changes where possible - specify parsers ignore properties they don't expect or understand to ensure changes are backwards compatible (this allows you to add fields to update functionality without requiring changes to the client application)")]),e._v(" "),t("li",[e._v("make a new endpoint available for significant changes")]),e._v(" "),t("li",[e._v("provide notices for deprecated endpoints")])]),e._v(" "),t("p",[e._v("New endpoints do not always need to accompany new functionality if they still maintain backward compatibility")]),e._v(" "),t("h2",{attrs:{id:"when-making-a-backwards-incompatible-change"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#when-making-a-backwards-incompatible-change"}},[e._v("#")]),e._v(" When making a backwards incompatible change")]),e._v(" "),t("p",[e._v("When you need to make a backwards incompatible change you should consider:")]),e._v(" "),t("ul",[t("li",[e._v("incrementing a version number in the URL or the HTTP header (start with "),t("code",[e._v("/v1/")]),e._v(" and increment with whole numbers)")]),e._v(" "),t("li",[e._v("supporting both old and new endpoints in parallel for a suitable time period before discontinuing the old one")]),e._v(" "),t("li",[e._v("telling users of your API how to validate data, for example, let them know when a field is not going to be present so they can make sure their validation rules will treat that field as optional")]),e._v(" "),t("li",[e._v("Sometimes you'll need to make a larger change and simplify a complex object structure by folding data from multiple objects together. In this case, make a new object available at a new endpoint, for example:")])]),e._v(" "),t("p",[e._v("Combine data about users and accounts from:")]),e._v(" "),t("p",[t("code",[e._v("/v1/users/123 and /v1/accounts/123")])]),e._v(" "),t("p",[e._v("To produce:")]),e._v(" "),t("p",[t("code",[e._v("/v1/consolidated-account/123")])]),e._v(" "),t("h2",{attrs:{id:"set-clear-deprecation-policies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-clear-deprecation-policies"}},[e._v("#")]),e._v(" Set clear deprecation policies")]),e._v(" "),t("p",[e._v("Set clear API deprecation policies so you're not supporting old client applications forever.")]),e._v(" "),t("p",[e._v("State how long users have to upgrade, and how you'll notify them of these deadlines. For example, at GDS, we usually contact developers directly but we also announce deprecation in HTTP responses using a 'Warning' header.")]),e._v(" "),t("h2",{attrs:{id:"provide-users-with-a-test-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#provide-users-with-a-test-service"}},[e._v("#")]),e._v(" Provide users with a test service")]),e._v(" "),t("p",[e._v("Your API consumers will want to test their application against your API before they go live. If you have a read only API then you do not necessarily need to provide a test service.")]),e._v(" "),t("p",[e._v("Provide them with a test service (sometimes referred to as a sandbox).")]),e._v(" "),t("p",[e._v("If your API has complex or stateful behaviour, consider providing a test service that mimics the live service as much as possible, but bear in mind the cost of doing this.")]),e._v(" "),t("p",[e._v("If your API requires authorisation, for example using OAuth 2.0, you'll need to include this in your test service or provide multiple levels of a test service.")]),e._v(" "),t("p",[e._v("To help you decide what to provide, do user research - ask your API consumers what a sufficient test service would look like.")]),e._v(" "),t("h2",{attrs:{id:"test-your-api-s-compliance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test-your-api-s-compliance"}},[e._v("#")]),e._v(" Test your API's compliance")]),e._v(" "),t("p",[e._v("You should provide your development team with the ability to test your API using sample test data, if applicable. Testing your API should not involve using production systems and production data.")]),e._v(" "),t("h2",{attrs:{id:"test-your-api-s-performance-and-scalability"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test-your-api-s-performance-and-scalability"}},[e._v("#")]),e._v(" Test your API's performance and scalability")]),e._v(" "),t("p",[e._v("For highly cacheable open data access APIs, a well-configured Content Delivery Network (CDN) may provide sufficient scalability.")]),e._v(" "),t("p",[e._v("For APIs that don't have those characteristics, you should set quota expectations for your users in terms of capacity and rate available. Start small, according to user needs, and respond to requests to increase capacity by making sure your API can meet the quotas you have set.")]),e._v(" "),t("p",[e._v("Make sure users can test your full API up to the quotas you have set.")]),e._v(" "),t("p",[e._v("Enforce the quotas you have set, even when you have excess capacity. This makes sure that your users will get a consistent experience when you don't have excess capacity, and will design and build to handle your API quota.")]),e._v(" "),t("p",[e._v("As with user-facing services, you should test the capacity of your APIs in a representative environment to help make sure you can meet demand.")]),e._v(" "),t("p",[e._v("Where the API delivers personal or private information you, as the data controller, must provide sufficient timeouts on any cached information in your delivery network.")]),e._v(" "),t("h2",{attrs:{id:"document-your-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#document-your-api"}},[e._v("#")]),e._v(" Document your API")]),e._v(" "),t("p",[e._v("To document your API start you should:")]),e._v(" "),t("ul",[t("li",[e._v("use the "),t("a",{attrs:{href:"https://swagger.io/specification/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenAPI 3 Specification"),t("OutboundLink")],1),e._v(" where appropriate for generating documentation (recommended by the Open Standards Board)")]),e._v(" "),t("li",[e._v("follow our guidance on how to "),t("RouterLink",{attrs:{to:"/technology/api/documentation.html"}},[e._v("document APIs")]),e._v(" and how to write API "),t("RouterLink",{attrs:{to:"/technology/api/documentation.html#reference-documentation"}},[e._v("reference documentation")])],1),e._v(" "),t("li",[e._v("provide sample code to illustrate how to call the API and to let users know what responses they can expect")])]),e._v(" "),t("p",[e._v("In your documentation, you should include:")]),e._v(" "),t("ul",[t("li",[e._v("contextual/overview information - what the API does, who it might be used by and under what circumstances")]),e._v(" "),t("li",[e._v("business and data rules - under what circumstances is data available / not available")]),e._v(" "),t("li",[e._v("error scenarios - preconditions and outcomes - including error codes and messages")]),e._v(" "),t("li",[e._v("details on the test service - how to use it and how to simulate the various success and error scenarios")]),e._v(" "),t("li",[e._v("full details of request and response parameters, including meaning, data type and any other constraints. Give examples of valid values.")]),e._v(" "),t("li",[e._v("rules on information handling, incident management and risk management")]),e._v(" "),t("li",[e._v("method of authentication (and how it impacts service interoperability, single sign-on, and rate-limiting)")]),e._v(" "),t("li",[e._v("any authorisation rules, for example, use of OAuth 2.0 and specifically which scopes are required for this API")]),e._v(" "),t("li",[e._v("design changes (recent and planned) and versioning information")]),e._v(" "),t("li",[e._v("availability, latency, ownership, deprecation policies and status capability")]),e._v(" "),t("li",[e._v("approach to backwards compatibility")]),e._v(" "),t("li",[e._v("guidance on configuring the API to make sure any relevant governance frameworks such as Payment Card Industry Data Security Standard and Health and Social Care Network are followed")]),e._v(" "),t("li",[e._v("security information")]),e._v(" "),t("li",[e._v("cost of use, if applicable")])]),e._v(" "),t("p",[e._v("You should always make sure your documentation is clear, and communicate when changes are made.")])])}),[],!1,null,null,null);a.default=s.exports}}]);